<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Artik Food ‚Äî –î–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –ê—Ä—Ç–∏–∫–µ</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#f5f5f5; }
    header { background:#1f5c3a; color:white; padding:15px; text-align:center; }
    .container { padding:15px; }
    .hidden { display:none; }
    .card, .product {
      background:white; border-radius:12px; padding:15px;
      margin-bottom:12px; box-shadow:0 2px 6px rgba(0,0,0,0.1);
      cursor:pointer;
    }
    .card:hover { background:#f0f8f5; }
    .product h4 { margin:0 0 5px 0; }
    .qty-controls {
      display:flex; align-items:center; gap:10px; margin-top:8px;
    }
    .qty-controls button {
      width:32px; height:32px; border:none; border-radius:50%;
      background:#1f5c3a; color:white; font-size:18px; cursor:pointer;
    }
    .qty-number { font-weight:bold; min-width:20px; text-align:center; }
    .cart {
      position:fixed; bottom:20px; right:20px;
      background:#1f5c3a; color:white; padding:12px 16px;
      border-radius:50px; cursor:pointer; box-shadow:0 4px 10px rgba(0,0,0,0.2);
    }
    .cart-panel {
      position:fixed; bottom:80px; right:20px; width:300px;
      background:white; border-radius:16px; padding:15px;
      box-shadow:0 4px 12px rgba(0,0,0,0.25);
      max-height:70vh; overflow-y:auto;
    }
    .cart-item {
      display:flex; justify-content:space-between; align-items:center;
      margin-bottom:8px;
    }
    .cart-item button {
      background:red; color:white; border:none; border-radius:50%;
      width:22px; height:22px; cursor:pointer;
    }
    .btn {
      display:block; width:100%; margin-top:10px; padding:10px;
      background:#1f5c3a; color:white; border:none; border-radius:10px;
      font-size:16px; cursor:pointer;
    }
    .btn.secondary { background:#777; }
    .top-buttons {
      position:fixed; right:15px; top:50%;
      display:flex; flex-direction:column; gap:10px;
      transform:translateY(-50%);
    }
    .top-buttons button {
      width:45px; height:45px; border-radius:50%;
      border:none; background:#1f5c3a; color:white;
      font-size:18px; cursor:pointer;
      box-shadow:0 2px 6px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>

<header>
  <h2>Artik Food</h2>
  <p>–î–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –ê—Ä—Ç–∏–∫–µ</p>
</header>

<div class="container">

  <!-- –ì–ª–∞–≤–Ω–∞—è -->
  <div id="home-page">
    <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç</h3>
    <div id="store-list"></div>
  </div>

  <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–∞–≥–∞–∑–∏–Ω–∞ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–æ–≤–∞—Ä—ã) -->
  <div id="store-page" class="hidden">
    <button class="btn secondary" onclick="goHome()">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</button>
    <h3 id="store-title"></h3>
    <div id="store-products"></div>
    <div id="store-cart" class="hidden cart">üõí –ö–æ—Ä–∑–∏–Ω–∞</div>
  </div>

</div>

<!-- –ü–∞–Ω–µ–ª—å –∫–æ—Ä–∑–∏–Ω—ã -->
<div id="cart-panel" class="cart-panel hidden"></div>

<!-- –ö–Ω–æ–ø–∫–∏ —Å–ø—Ä–∞–≤–∞ -->
<div class="top-buttons">
  <button onclick="goHome()">üè†</button>
  <button onclick="scrollToTop()">‚¨ÜÔ∏è</button>
</div>

<script>
/* --- –î–ê–ù–ù–´–ï --- */
const stores = {
  million: {
    name: "Million",
    products: [
      { name: "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å 1–∫–≥", price: 300, category: "–û–≤–æ—â–∏" },
      { name: "–õ—É–∫ 1–∫–≥", price: 250, category: "–û–≤–æ—â–∏" },
      { name: "–ú–æ—Ä–∫–æ–≤—å 1–∫–≥", price: 280, category: "–û–≤–æ—â–∏" },
      { name: "–Ø–±–ª–æ–∫–∏ 1–∫–≥", price: 400, category: "–§—Ä—É–∫—Ç—ã" },
      { name: "–ë–∞–Ω–∞–Ω—ã 1–∫–≥", price: 550, category: "–§—Ä—É–∫—Ç—ã" },
      { name: "–ê–ø–µ–ª—å—Å–∏–Ω—ã 1–∫–≥", price: 500, category: "–§—Ä—É–∫—Ç—ã" },
      { name: "–•–ª–µ–± –±–µ–ª—ã–π", price: 200, category: "–•–ª–µ–±" },
      { name: "–õ–∞–≤–∞—à", price: 180, category: "–•–ª–µ–±" },
      { name: "–ú–æ–ª–æ–∫–æ 1–ª", price: 450, category: "–ú–æ–ª–æ—á–Ω—ã–µ" },
      { name: "–°—ã—Ä 1–∫–≥", price: 2600, category: "–ú–æ–ª–æ—á–Ω—ã–µ" },
      { name: "–ô–æ–≥—É—Ä—Ç", price: 300, category: "–ú–æ–ª–æ—á–Ω—ã–µ" },
      { name: "–Ø–π—Ü–∞ 10—à—Ç", price: 900, category: "–ë–∞–∫–∞–ª–µ—è" }
    ]
  },
  mush: {
    name: "’Ñ’∏÷Ç’∑",
    products: [
      { name: "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å 1–∫–≥", price: 290, category: "–û–≤–æ—â–∏" },
      { name: "–û–≥—É—Ä—Ü—ã 1–∫–≥", price: 600, category: "–û–≤–æ—â–∏" },
      { name: "–ü–æ–º–∏–¥–æ—Ä—ã 1–∫–≥", price: 650, category: "–û–≤–æ—â–∏" },
      { name: "–Ø–±–ª–æ–∫–∏ 1–∫–≥", price: 380, category: "–§—Ä—É–∫—Ç—ã" },
      { name: "–ì—Ä—É—à–∏ 1–∫–≥", price: 520, category: "–§—Ä—É–∫—Ç—ã" },
      { name: "–í–∏–Ω–æ–≥—Ä–∞–¥ 1–∫–≥", price: 700, category: "–§—Ä—É–∫—Ç—ã" },
      { name: "–•–ª–µ–± —á–µ—Ä–Ω—ã–π", price: 220, category: "–•–ª–µ–±" },
      { name: "–õ–∞–≤–∞—à", price: 170, category: "–•–ª–µ–±" },
      { name: "–ú–æ–ª–æ–∫–æ 1–ª", price: 440, category: "–ú–æ–ª–æ—á–Ω—ã–µ" },
      { name: "–°—ã—Ä 1–∫–≥", price: 2550, category: "–ú–æ–ª–æ—á–Ω—ã–µ" },
      { name: "–°–º–µ—Ç–∞–Ω–∞", price: 380, category: "–ú–æ–ª–æ—á–Ω—ã–µ" },
      { name: "–Ø–π—Ü–∞ 10—à—Ç", price: 880, category: "–ë–∞–∫–∞–ª–µ—è" }
    ]
  },
  tonoyan: {
    name: "Tonoyan",
    products: [
      { name: "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å 1–∫–≥", price: 310, category: "–û–≤–æ—â–∏" },
      { name: "–õ—É–∫ 1–∫–≥", price: 260, category: "–û–≤–æ—â–∏" },
      { name: "–°–≤–µ–∫–ª–∞ 1–∫–≥", price: 270, category: "–û–≤–æ—â–∏" },
      { name: "–Ø–±–ª–æ–∫–∏ 1–∫–≥", price: 410, category: "–§—Ä—É–∫—Ç—ã" },
      { name: "–ë–∞–Ω–∞–Ω—ã 1–∫–≥", price: 560, category: "–§—Ä—É–∫—Ç—ã" },
      { name: "–ö–∏–≤–∏ 1–∫–≥", price: 750, category: "–§—Ä—É–∫—Ç—ã" },
      { name: "–•–ª–µ–± –±–µ–ª—ã–π", price: 210, category: "–•–ª–µ–±" },
      { name: "–ë—É–ª–æ—á–∫–∞", price: 120, category: "–•–ª–µ–±" },
      { name: "–ú–æ–ª–æ–∫–æ 1–ª", price: 460, category: "–ú–æ–ª–æ—á–Ω—ã–µ" },
      { name: "–°—ã—Ä 1–∫–≥", price: 2700, category: "–ú–æ–ª–æ—á–Ω—ã–µ" },
      { name: "–¢–≤–æ—Ä–æ–≥", price: 600, category: "–ú–æ–ª–æ—á–Ω—ã–µ" },
      { name: "–Ø–π—Ü–∞ 10—à—Ç", price: 920, category: "–ë–∞–∫–∞–ª–µ—è" }
    ]
  },
  danielyan: {
    name: "Danielyan",
    products: [
      { name: "–ü–µ—á–µ–Ω—å–µ", price: 450, category: "Danielyan Sweet" },
      { name: "–¢–æ—Ä—Ç –∫—É—Å–æ—á–µ–∫", price: 900, category: "Danielyan Sweet" },
      { name: "–®–æ–∫–æ–ª–∞–¥", price: 700, category: "Danielyan Sweet" },
      { name: "–ö–æ–Ω—Ñ–µ—Ç—ã", price: 850, category: "Danielyan Sweet" },
      { name: "–ü–∏—Ä–æ–∂–Ω–æ–µ", price: 500, category: "Danielyan Sweet" },
      { name: "–ö—Ä—É–∞—Å—Å–∞–Ω", price: 350, category: "Danielyan Sweet" },
      { name: "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å 1–∫–≥", price: 300, category: "–û–≤–æ—â–∏" },
      { name: "–Ø–±–ª–æ–∫–∏ 1–∫–≥", price: 400, category: "–§—Ä—É–∫—Ç—ã" },
      { name: "–•–ª–µ–± –±–µ–ª—ã–π", price: 200, category: "–•–ª–µ–±" },
      { name: "–ú–æ–ª–æ–∫–æ 1–ª", price: 450, category: "–ú–æ–ª–æ—á–Ω—ã–µ" },
      { name: "–°—ã—Ä 1–∫–≥", price: 2600, category: "–ú–æ–ª–æ—á–Ω—ã–µ" },
      { name: "–Ø–π—Ü–∞ 10—à—Ç", price: 900, category: "–ë–∞–∫–∞–ª–µ—è" }
    ]
  }
};

let carts = JSON.parse(localStorage.getItem("carts")) || {};
let currentStore = null;

/* --- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø --- */
const storeList = document.getElementById("store-list");
for (const key in stores) {
  const div = document.createElement("div");
  div.className = "card";
  div.innerHTML = `<h4>${stores[key].name}</h4>`;
  div.onclick = () => openStore(key);
  storeList.appendChild(div);
}

/* --- –§–£–ù–ö–¶–ò–ò --- */
function openStore(storeKey) {
  currentStore = storeKey;
  document.getElementById("home-page").classList.add("hidden");
  document.getElementById("store-page").classList.remove("hidden");
  document.getElementById("store-title").innerText = stores[storeKey].name;

  const container = document.getElementById("store-products");
  container.innerHTML = "";

  const categories = [...new Set(stores[storeKey].products.map(p => p.category))];
  categories.forEach(cat => {
    const div = document.createElement("div");
    div.className = "card";
    div.innerHTML = `<h4>${cat}</h4>`;
    div.onclick = () => openStoreCategory(cat);
    container.appendChild(div);
  });

  document.getElementById("store-cart").classList.add("hidden");
  window.scrollTo({ top: 0, behavior: "smooth" });
}

function openStoreCategory(categoryName) {
  const container = document.getElementById("store-products");
  container.innerHTML = "";

  stores[currentStore].products.forEach(item => {
    if (item.category === categoryName) {
      const safeId = item.name.replace(/\s+/g, "");
      const qty = carts[currentStore]?.[item.name]?.qty || 0;
      const div = document.createElement("div");
      div.className = "product";
      div.innerHTML = `
        <h4>${item.name}</h4>
        <p>–¶–µ–Ω–∞: ${item.price} AMD</p>
        <div class="qty-controls">
          <button onclick="changeQty('${currentStore}', '${item.name}', ${item.price}, -1)">‚àí</button>
          <span class="qty-number" id="qty-${currentStore}-${safeId}">${qty}</span>
          <button onclick="changeQty('${currentStore}', '${item.name}', ${item.price}, 1)">+</button>
        </div>
      `;
      container.appendChild(div);
    }
  });

  document.getElementById("store-cart").classList.remove("hidden");
}

function changeQty(storeKey, productName, price, delta) {
  if (!carts[storeKey]) carts[storeKey] = {};
  if (!carts[storeKey][productName]) carts[storeKey][productName] = { qty: 0, price };

  carts[storeKey][productName].qty += delta;
  if (carts[storeKey][productName].qty <= 0) {
    delete carts[storeKey][productName];
  }

  if (Object.keys(carts[storeKey]).length === 0) {
    delete carts[storeKey];
  }

  localStorage.setItem("carts", JSON.stringify(carts));
  updateQtyDisplay(storeKey, productName);
  updateCartPanel();
}

function updateQtyDisplay(storeKey, productName) {
  const safeId = productName.replace(/\s+/g, "");
  const span = document.getElementById(`qty-${storeKey}-${safeId}`);
  if (span) {
    span.innerText = carts[storeKey]?.[productName]?.qty || 0;
  }
}

const cartBtn = document.getElementById("store-cart");
cartBtn.onclick = () => {
  document.getElementById("cart-panel").classList.toggle("hidden");
  updateCartPanel();
};

function updateCartPanel() {
  const panel = document.getElementById("cart-panel");
  panel.innerHTML = "<h4>–ö–æ—Ä–∑–∏–Ω–∞</h4>";
  let total = 0;

  for (const storeKey in carts) {
    const storeTitle = document.createElement("h5");
    storeTitle.innerText = stores[storeKey].name;
    panel.appendChild(storeTitle);

    for (const product in carts[storeKey]) {
      const item = carts[storeKey][product];
      const line = document.createElement("div");
      line.className = "cart-item";
      line.innerHTML = `
        <span>${product} (${item.qty})</span>
        <span>${item.qty * item.price} AMD</span>
        <button onclick="removeItem('${storeKey}', '${product}')">√ó</button>
      `;
      panel.appendChild(line);
      total += item.qty * item.price;
    }
  }

  const totalDiv = document.createElement("div");
  totalDiv.innerHTML = `<strong>–ò—Ç–æ–≥–æ: ${total} AMD</strong>`;
  panel.appendChild(totalDiv);

  const orderBtn = document.createElement("button");
  orderBtn.className = "btn";
  orderBtn.innerText = "–ó–∞–∫–∞–∑–∞—Ç—å —á–µ—Ä–µ–∑ Telegram";
  orderBtn.onclick = sendToTelegram;
  panel.appendChild(orderBtn);
}

function removeItem(storeKey, productName) {
  delete carts[storeKey][productName];
  if (Object.keys(carts[storeKey]).length === 0) {
    delete carts[storeKey];
  }
  localStorage.setItem("carts", JSON.stringify(carts));
  updateCartPanel();
}

function sendToTelegram() {
  let message = "üõí –ó–∞–∫–∞–∑ Artik Food:\n\n";
  let total = 0;

  for (const storeKey in carts) {
    message += `üè¨ ${stores[storeKey].name}:\n`;
    for (const product in carts[storeKey]) {
      const item = carts[storeKey][product];
      message += `- ${product} √ó ${item.qty} = ${item.qty * item.price} AMD\n`;
      total += item.qty * item.price;
    }
    message += "\n";
  }

  message += `üí∞ –ò—Ç–æ–≥–æ: ${total} AMD`;
  const encoded = encodeURIComponent(message);
  window.open(`https://t.me/share/url?text=${encoded}`, "_blank");
}

function goHome() {
  document.getElementById("store-page").classList.add("hidden");
  document.getElementById("home-page").classList.remove("hidden");
  document.getElementById("cart-panel").classList.add("hidden");
  window.scrollTo({ top: 0, behavior: "smooth" });
}

function scrollToTop() {
  window.scrollTo({ top: 0, behavior: "smooth" });
}
</script>

</body>
</html>
