<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Artik Food ‚Äî –î–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –ê—Ä—Ç–∏–∫–µ</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2ecc71">
  <link rel="apple-touch-icon" href="icon-192.png">

  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f8f8f8; color: #333; }
    header { background: #2ecc71; color: white; padding: 12px 16px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
    header .logo-box { display:flex; align-items:center; gap:10px; cursor:pointer; }
    header img { height: 40px; }
    header h1 { margin: 0; font-size: 22px; }

    nav a { color: white; margin-left: 12px; text-decoration: none; font-weight: bold; font-size: 14px; }
    .lang-switch { margin-left: 12px; background:#fff; color:#2ecc71; border:none; border-radius:6px; padding:4px 8px; cursor:pointer; font-weight:bold; }

    .hero { background: #27ae60; color: white; padding: 40px 16px; text-align: center; }
    .hero h2 { font-size: 30px; margin-bottom: 10px; }
    .hero p { font-size: 17px; margin-bottom: 20px; }
    .hero button { background: white; color: #27ae60; border: none; padding: 12px 20px; font-size: 16px; border-radius: 6px; cursor: pointer; }

    .section { padding: 32px 16px; max-width: 1100px; margin: auto; }
    .section h3 { text-align: center; margin-bottom: 24px; }

    .shops, .categories, .products { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: 16px; }

    .card, .product { background: white; padding: 16px; border-radius: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); text-align: center; cursor: pointer; }
    .product button { background: #2ecc71; color: white; border: none; padding: 6px 10px; border-radius: 6px; cursor: pointer; font-size: 14px; }

    .qty-controls { display:flex; justify-content:center; align-items:center; gap:8px; margin-top:8px; }
    .qty-controls button { width:30px; height:30px; border-radius:50%; border:none; background:#2ecc71; color:white; font-weight:bold; cursor:pointer; }
    .qty-number { min-width:20px; font-weight:bold; }

    .cart { background:white; padding:16px; border-radius:10px; max-width:500px; margin:20px auto; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    .cart h4 { margin-top:0; text-align:center; }
    .cart-item { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; font-size:14px; gap:8px; }
    .cart-total { font-weight:bold; margin-top:10px; text-align:center; }
    .cart button { width:100%; background:#27ae60; color:white; border:none; padding:10px; font-size:15px; border-radius:6px; cursor:pointer; margin-top:10px; }

    .order-form { background:white; padding:20px; border-radius:10px; max-width:500px; margin:auto; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    .order-form input, .order-form textarea, .order-form select { width:100%; padding:10px; margin-bottom:12px; border-radius:6px; border:1px solid #ccc; font-size:14px; }
    .order-form button { width:100%; background:#27ae60; color:white; border:none; padding:12px; font-size:16px; border-radius:6px; cursor:pointer; }

    .whatsapp-btn { position:fixed; bottom:16px; right:16px; background:#25D366; color:white; padding:14px 18px; border-radius:50px; text-decoration:none; font-weight:bold; box-shadow:0 4px 10px rgba(0,0,0,0.2); font-size:15px; }
    .telegram-btn { position:fixed; bottom:70px; right:16px; background:#0088cc; color:white; padding:14px 18px; border-radius:50px; text-decoration:none; font-weight:bold; box-shadow:0 4px 10px rgba(0,0,0,0.2); font-size:15px; display:flex; align-items:center; gap:6px; }

    footer { background:#2ecc71; color:white; text-align:center; padding:16px; margin-top:40px; font-size:14px; }
    .hidden { display:none; }

    /* Admin + courier */
    .admin-login, .admin-panel, .courier-panel {
      max-width:700px;
      margin:40px auto;
      background:white;
      padding:20px;
      border-radius:10px;
      box-shadow:0 2px 6px rgba(0,0,0,0.1);
    }
    .admin-panel h3, .admin-panel h4, .courier-panel h3 { text-align:center; }
    .admin-panel select, .admin-panel input, .courier-panel input {
      width:100%;
      padding:8px;
      margin-bottom:10px;
      border-radius:6px;
      border:1px solid #ccc;
    }
    .admin-panel button, .courier-panel button {
      width:100%;
      background:#27ae60;
      color:white;
      border:none;
      padding:10px;
      border-radius:6px;
      cursor:pointer;
      margin-top:8px;
    }
    .admin-panel .danger { background:#e74c3c; }
    .report-box { border:1px solid #ddd; padding:10px; border-radius:6px; margin-bottom:10px; font-size:14px; }

    /* Floating nav */
    .floating-buttons {
      position: fixed;
      bottom: 140px;
      right: 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 9999;
    }
    .floating-buttons button {
      padding: 10px 14px;
      border: none;
      border-radius: 25px;
      background: #ff6b00;
      color: #fff;
      font-size: 14px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      cursor: pointer;
    }
    .floating-buttons button:hover { background:#e65c00; }
  </style>
</head>
<body>

<header>
  <div class="logo-box" onclick="goHome()">
    <img src="logo.png" alt="Artik Food">
    <h1>Artik Food</h1>
  </div>
  <nav>
    <a href="#" onclick="goHome()" data-i18n="nav_home">–ì–ª–∞–≤–Ω–∞—è</a>
    <a href="#order" data-i18n="nav_order">–ó–∞–∫–∞–∑–∞—Ç—å</a>
    <a href="#contacts" data-i18n="nav_contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
    <a href="#" onclick="openAdmin()" data-i18n="nav_admin">–ê–¥–º–∏–Ω</a>
    <a href="#" onclick="openCourier()" data-i18n="nav_courier">–ö—É—Ä—å–µ—Ä</a>
    <button class="lang-switch" onclick="switchLang()">RU / AM</button>
  </nav>
</header>

<!-- –ì–õ–ê–í–ù–ê–Ø -->
<div id="home-page">

<section class="hero">
  <h2 data-i18n="hero_title">–î–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –ê—Ä—Ç–∏–∫–µ</h2>
  <p data-i18n="hero_subtitle">–°–≤–µ–∂–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –∏–∑ —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç–æ–≤ ‚Äî –ø—Ä—è–º–æ –∫ –≤–∞—à–µ–π –¥–≤–µ—Ä–∏</p>
  <button onclick="document.getElementById('order').scrollIntoView({behavior:'smooth'});" data-i18n="hero_btn">–ó–∞–∫–∞–∑–∞—Ç—å —Å–µ–π—á–∞—Å</button>
</section>

<section class="section" id="shops">
  <h3 data-i18n="shops_title">–°—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç—ã</h3>
  <div class="shops" id="shops-list"></div>
</section>

<section class="section" id="catalog">
  <h3 data-i18n="categories_title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤</h3>
  <div class="categories">
    <div class="card" onclick="openCategory('–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã')">ü•¶ <span data-i18n="cat_veg">–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã</span></div>
    <div class="card" onclick="openCategory('–ú—è—Å–æ –∏ —Ä—ã–±–∞')">ü•© <span data-i18n="cat_meat">–ú—è—Å–æ –∏ —Ä—ã–±–∞</span></div>
    <div class="card" onclick="openCategory('–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã')">üßÄ <span data-i18n="cat_dairy">–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã</span></div>
    <div class="card" onclick="openCategory('–•–ª–µ–± –∏ –≤—ã–ø–µ—á–∫–∞')">üçû <span data-i18n="cat_bread">–•–ª–µ–± –∏ –≤—ã–ø–µ—á–∫–∞</span></div>
    <div class="card" onclick="openCategory('–ë–∞–∫–∞–ª–µ—è')">ü•´ <span data-i18n="cat_grocery">–ë–∞–∫–∞–ª–µ—è</span></div>
    <div class="card" onclick="openCategory('–ù–∞–ø–∏—Ç–∫–∏')">üßÉ <span data-i18n="cat_drinks">–ù–∞–ø–∏—Ç–∫–∏</span></div>
    <div class="card" onclick="openCategory('–ë—ã—Ç–æ–≤–∞—è —Ö–∏–º–∏—è')">üßº <span data-i18n="cat_clean">–ë—ã—Ç–æ–≤–∞—è —Ö–∏–º–∏—è</span></div>
    <div class="card" onclick="openCategory('–°–ª–∞–¥–æ—Å—Ç–∏')">üç∞ <span data-i18n="cat_sweets">–°–ª–∞–¥–æ—Å—Ç–∏</span></div>
  </div>
</section>

<section class="section">
  <div class="cart" id="global-cart">
    <h4 data-i18n="cart_global">–ö–æ—Ä–∑–∏–Ω–∞ (–≤—Å–µ –º–∞–≥–∞–∑–∏–Ω—ã)</h4>
    <div id="global-cart-items"></div>
    <div class="cart-total" id="global-cart-total">–¢–æ–≤–∞—Ä—ã: 0 AMD</div>
    <div class="cart-total" id="delivery-total">–î–æ—Å—Ç–∞–≤–∫–∞: 0 AMD</div>
    <div class="cart-total" id="grand-total">–ò—Ç–æ–≥–æ: 0 AMD</div>
  </div>
</section>

</div>

<!-- –°–¢–†–ê–ù–ò–¶–ê –°–£–ü–ï–†–ú–ê–†–ö–ï–¢–ê -->
<div id="store-page" class="hidden">
  <section class="section">
    <h3 id="store-title"></h3>
    <div class="products" id="store-products"></div>

    <div class="cart" id="store-cart">
      <h4 data-i18n="cart_store">–ö–æ—Ä–∑–∏–Ω–∞ —ç—Ç–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞</h4>
      <div id="store-cart-items"></div>
      <div class="cart-total" id="store-cart-total">–ò—Ç–æ–≥–æ: 0 AMD</div>
      <button onclick="sendStoreToWhatsApp()" data-i18n="btn_whatsapp_store">–ó–∞–∫–∞–∑–∞—Ç—å –∏–∑ —ç—Ç–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ (WhatsApp)</button>
      <button onclick="sendStoreToTelegram()" style="background:#0088cc;" data-i18n="btn_telegram_store">–ó–∞–∫–∞–∑–∞—Ç—å –∏–∑ —ç—Ç–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ (Telegram)</button>
    </div>
  </section>
</div>

<!-- –°–¢–†–ê–ù–ò–¶–ê –ö–ê–¢–ï–ì–û–†–ò–ò -->
<div id="category-page" class="hidden">
  <section class="section">
    <h3 id="category-title"></h3>
    <div class="products" id="category-products"></div>
  </section>
</div>

<!-- –ê–î–ú–ò–ù –õ–û–ì–ò–ù -->
<div id="admin-login" class="admin-login hidden">
  <h3 data-i18n="admin_login_title">–í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h3>
  <input type="text" id="admin-user" placeholder="–õ–æ–≥–∏–Ω" />
  <input type="password" id="admin-pass" placeholder="–ü–∞—Ä–æ–ª—å" />
  <button onclick="loginAdmin()" data-i18n="admin_login_btn">–í–æ–π—Ç–∏</button>
  <p id="admin-error" style="color:red; text-align:center;"></p>
</div>

<!-- –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ -->
<div id="admin-panel" class="admin-panel hidden">
  <h3 data-i18n="admin_panel_title">–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h3>

  <label data-i18n="admin_select_store">–í—ã–±–µ—Ä–∏—Ç–µ —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç:</label>
  <select id="admin-store-select" onchange="loadAdminProducts()"></select>

  <div id="admin-products-list"></div>

  <h4 data-i18n="admin_add_product">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä</h4>
  <input type="text" id="new-product-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" />
  <input type="number" id="new-product-price" placeholder="–¶–µ–Ω–∞ (AMD)" />
  <input type="text" id="new-product-category" placeholder="–ö–∞—Ç–µ–≥–æ—Ä–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ë–∞–∫–∞–ª–µ—è)" />
  <button onclick="addProduct()" data-i18n="admin_add_btn">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>

  <h4>üìä <span data-i18n="admin_orders_report">–û—Ç—á—ë—Ç –ø–æ –∑–∞–∫–∞–∑–∞–º</span></h4>
  <div id="orders-report"></div>

  <button class="danger" onclick="logoutAdmin()" data-i18n="admin_logout">–í—ã–π—Ç–∏ –∏–∑ –∞–¥–º–∏–Ω–∫–∏</button>
</div>

<!-- –ö–£–†–¨–ï–† -->
<div id="courier-panel" class="courier-panel hidden">
  <h3 data-i18n="courier_title">–ü–∞–Ω–µ–ª—å –∫—É—Ä—å–µ—Ä–∞</h3>
  <div id="courier-orders"></div>
  <button onclick="goHome()" data-i18n="courier_back">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</button>
</div>

<!-- –û–§–û–†–ú–õ–ï–ù–ò–ï -->
<section class="section" id="order">
  <h3 data-i18n="order_title">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>
  <form class="order-form" onsubmit="event.preventDefault(); sendFormToWhatsApp();">
    <input type="text" id="name" placeholder="–í–∞—à–µ –∏–º—è" required />
    <input type="tel" id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required />
    <input type="text" id="address" placeholder="–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏" required />
    <select id="district" required onchange="renderGlobalCart()">
      <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–π–æ–Ω –¥–æ—Å—Ç–∞–≤–∫–∏</option>
      <option value="–¶–µ–Ω—Ç—Ä">–¶–µ–Ω—Ç—Ä ‚Äî 500 AMD</option>
      <option value="–°–µ–≤–µ—Ä">–°–µ–≤–µ—Ä ‚Äî 700 AMD</option>
      <option value="–Æ–≥">–Æ–≥ ‚Äî 800 AMD</option>
      <option value="–û–∫—Ä–∞–∏–Ω–∞">–û–∫—Ä–∞–∏–Ω–∞ ‚Äî 1000 AMD</option>
    </select>
    <textarea rows="3" id="comment" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É"></textarea>
    <button type="submit" data-i18n="order_send">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </form>
</section>

<section class="section" id="contacts">
  <h3 data-i18n="contacts_title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
  <div class="card" style="max-width:400px; margin:auto;">
    <p>üìû <span data-i18n="contacts_phone_label">–¢–µ–ª–µ—Ñ–æ–Ω / WhatsApp:</span> <a href="tel:+37443797727" style="color:#27ae60; font-weight:bold;">+374 43 79 77 27</a></p>
    <p>‚úàÔ∏è Telegram: @artikfood</p>
    <p>üìç <span data-i18n="contacts_city">–ê—Ä—Ç–∏–∫, –ê—Ä–º–µ–Ω–∏—è</span></p>
  </div>
</section>

<a class="whatsapp-btn" href="https://wa.me/37443797727" target="_blank">üí¨ WhatsApp</a>
<a class="telegram-btn" href="https://t.me/artikfood" target="_blank"><span>‚úàÔ∏è</span> Telegram</a>

<!-- Floating buttons -->
<div class="floating-buttons">
  <button onclick="goBack()">‚Üê <span data-i18n="btn_back">–ù–∞–∑–∞–¥</span></button>
  <button onclick="goHome()">üè† <span data-i18n="btn_home">–ì–ª–∞–≤–Ω–∞—è</span></button>
</div>

<footer>
  <p>¬© 2026 Artik Food ‚Äî <span data-i18n="footer_text">–î–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –ê—Ä—Ç–∏–∫–µ</span></p>
</footer>

<script>
  /* ================= DATA ================= */

  let carts = JSON.parse(localStorage.getItem("carts")) || {};
  let orders = JSON.parse(localStorage.getItem("orders")) || [];
  let currentStore = null;
  let currentLang = localStorage.getItem("lang") || "ru";

  const deliveryPrices = {
    "–¶–µ–Ω—Ç—Ä": 500,
    "–°–µ–≤–µ—Ä": 700,
    "–Æ–≥": 800,
    "–û–∫—Ä–∞–∏–Ω–∞": 1000
  };

  const defaultStores = {
    million: {
      name: "Million",
      products: [
        { name: "–ú–æ–ª–æ–∫–æ 1–ª", price: 450, category: "–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã" },
        { name: "–ô–æ–≥—É—Ä—Ç", price: 350, category: "–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã" },
        { name: "–°—ã—Ä 200–≥", price: 900, category: "–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã" },
        { name: "–¢–≤–æ—Ä–æ–≥", price: 500, category: "–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã" },
        { name: "–ú–∞—Å–ª–æ —Å–ª–∏–≤–æ—á–Ω–æ–µ", price: 800, category: "–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã" },

        { name: "–•–ª–µ–± –±–µ–ª—ã–π", price: 200, category: "–•–ª–µ–± –∏ –≤—ã–ø–µ—á–∫–∞" },
        { name: "–•–ª–µ–± —á—ë—Ä–Ω—ã–π", price: 220, category: "–•–ª–µ–± –∏ –≤—ã–ø–µ—á–∫–∞" },
        { name: "–õ–∞–≤–∞—à", price: 180, category: "–•–ª–µ–± –∏ –≤—ã–ø–µ—á–∫–∞" },
        { name: "–ë—É–ª–æ—á–∫–∞", price: 120, category: "–•–ª–µ–± –∏ –≤—ã–ø–µ—á–∫–∞" },

        { name: "–°–∞—Ö–∞—Ä 1–∫–≥", price: 420, category: "–ë–∞–∫–∞–ª–µ—è" },
        { name: "–†–∏—Å 1–∫–≥", price: 490, category: "–ë–∞–∫–∞–ª–µ—è" },
        { name: "–ú–∞–∫–∞—Ä–æ–Ω—ã", price: 340, category: "–ë–∞–∫–∞–ª–µ—è" },
        { name: "–ú–∞—Å–ª–æ –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–æ–µ", price: 650, category: "–ë–∞–∫–∞–ª–µ—è" },

        { name: "–ö—É—Ä–∏–Ω–æ–µ —Ñ–∏–ª–µ", price: 1400, category: "–ú—è—Å–æ –∏ —Ä—ã–±–∞" },
        { name: "–ì–æ–≤—è–¥–∏–Ω–∞", price: 2300, category: "–ú—è—Å–æ –∏ —Ä—ã–±–∞" },
        { name: "–ö–æ–ª–±–∞—Å–∞", price: 1200, category: "–ú—è—Å–æ –∏ —Ä—ã–±–∞" },
        { name: "–°–æ—Å–∏—Å–∫–∏", price: 900, category: "–ú—è—Å–æ –∏ —Ä—ã–±–∞" },

        { name: "–Ø–±–ª–æ–∫–∏ 1–∫–≥", price: 350, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–ë–∞–Ω–∞–Ω—ã 1–∫–≥", price: 480, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å 1–∫–≥", price: 250, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–ü–æ–º–∏–¥–æ—Ä—ã 1–∫–≥", price: 540, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–û–≥—É—Ä—Ü—ã 1–∫–≥", price: 500, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },

        { name: "–í–æ–¥–∞ 1.5–ª", price: 200, category: "–ù–∞–ø–∏—Ç–∫–∏" },
        { name: "–°–æ–∫ –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π", price: 450, category: "–ù–∞–ø–∏—Ç–∫–∏" },
        { name: "–ö–æ–∫–∞-–ö–æ–ª–∞ 1–ª", price: 400, category: "–ù–∞–ø–∏—Ç–∫–∏" },
        { name: "–ß–∞–π", price: 600, category: "–ù–∞–ø–∏—Ç–∫–∏" },
        { name: "–ö–æ—Ñ–µ", price: 1200, category: "–ù–∞–ø–∏—Ç–∫–∏" },

        { name: "–ü–æ—Ä–æ—à–æ–∫ —Å—Ç–∏—Ä–∞–ª—å–Ω—ã–π", price: 1500, category: "–ë—ã—Ç–æ–≤–∞—è —Ö–∏–º–∏—è" },
        { name: "–°—Ä–µ–¥—Å—Ç–≤–æ –¥–ª—è –ø–æ—Å—É–¥—ã", price: 700, category: "–ë—ã—Ç–æ–≤–∞—è —Ö–∏–º–∏—è" },
        { name: "–ú—ã–ª–æ", price: 300, category: "–ë—ã—Ç–æ–≤–∞—è —Ö–∏–º–∏—è" },
        { name: "–®–∞–º–ø—É–Ω—å", price: 1100, category: "–ë—ã—Ç–æ–≤–∞—è —Ö–∏–º–∏—è" },

        { name: "–®–æ–∫–æ–ª–∞–¥", price: 500, category: "–°–ª–∞–¥–æ—Å—Ç–∏" },
        { name: "–ü–µ—á–µ–Ω—å–µ", price: 450, category: "–°–ª–∞–¥–æ—Å—Ç–∏" },
        { name: "–ö–æ–Ω—Ñ–µ—Ç—ã", price: 800, category: "–°–ª–∞–¥–æ—Å—Ç–∏" },
        { name: "–í–∞—Ñ–ª–∏", price: 350, category: "–°–ª–∞–¥–æ—Å—Ç–∏" }
      ]
    },

    mush: {
      name: "’Ñ’∏÷Ç’∑",
      products: [
        { name: "–ú–æ–ª–æ–∫–æ 1–ª", price: 430, category: "–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã" },
        { name: "–ô–æ–≥—É—Ä—Ç", price: 330, category: "–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã" },
        { name: "–°—ã—Ä", price: 880, category: "–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã" },
        { name: "–°–º–µ—Ç–∞–Ω–∞", price: 480, category: "–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã" },
        { name: "–ö–µ—Ñ–∏—Ä", price: 420, category: "–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã" },

        { name: "–•–ª–µ–±", price: 190, category: "–•–ª–µ–± –∏ –≤—ã–ø–µ—á–∫–∞" },
        { name: "–õ–∞–≤–∞—à", price: 200, category: "–•–ª–µ–± –∏ –≤—ã–ø–µ—á–∫–∞" },
        { name: "–ë—É–ª–æ—á–∫–∞", price: 130, category: "–•–ª–µ–± –∏ –≤—ã–ø–µ—á–∫–∞" },

        { name: "–°–∞—Ö–∞—Ä 1–∫–≥", price: 410, category: "–ë–∞–∫–∞–ª–µ—è" },
        { name: "–†–∏—Å 1–∫–≥", price: 480, category: "–ë–∞–∫–∞–ª–µ—è" },
        { name: "–ú–∞–∫–∞—Ä–æ–Ω—ã", price: 330, category: "–ë–∞–∫–∞–ª–µ—è" },
        { name: "–ú–∞—Å–ª–æ –ø–æ–¥—Å–æ–ª–Ω–µ—á–Ω–æ–µ", price: 640, category: "–ë–∞–∫–∞–ª–µ—è" },

        { name: "–ö—É—Ä–∏—Ü–∞ —Ü–µ–ª–∞—è", price: 1600, category: "–ú—è—Å–æ –∏ —Ä—ã–±–∞" },
        { name: "–ì–æ–≤—è–¥–∏–Ω–∞", price: 2250, category: "–ú—è—Å–æ –∏ —Ä—ã–±–∞" },
        { name: "–ö–æ–ª–±–∞—Å–∞", price: 1150, category: "–ú—è—Å–æ –∏ —Ä—ã–±–∞" },

        { name: "–Ø–±–ª–æ–∫–∏ 1–∫–≥", price: 330, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–ë–∞–Ω–∞–Ω—ã 1–∫–≥", price: 460, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å 1–∫–≥", price: 240, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–õ—É–∫ 1–∫–≥", price: 190, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–ö–∞–ø—É—Å—Ç–∞ 1–∫–≥", price: 220, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },

        { name: "–í–æ–¥–∞ 1.5–ª", price: 190, category: "–ù–∞–ø–∏—Ç–∫–∏" },
        { name: "–°–æ–∫ —è–±–ª–æ—á–Ω—ã–π", price: 430, category: "–ù–∞–ø–∏—Ç–∫–∏" },
        { name: "–ì–∞–∑–∏—Ä–æ–≤–∫–∞", price: 380, category: "–ù–∞–ø–∏—Ç–∫–∏" },

        { name: "–ü–æ—Ä–æ—à–æ–∫", price: 1450, category: "–ë—ã—Ç–æ–≤–∞—è —Ö–∏–º–∏—è" },
        { name: "–°—Ä–µ–¥—Å—Ç–≤–æ –¥–ª—è –ø–æ—Å—É–¥—ã", price: 680, category: "–ë—ã—Ç–æ–≤–∞—è —Ö–∏–º–∏—è" },
        { name: "–ú—ã–ª–æ", price: 280, category: "–ë—ã—Ç–æ–≤–∞—è —Ö–∏–º–∏—è" },

        { name: "–®–æ–∫–æ–ª–∞–¥", price: 480, category: "–°–ª–∞–¥–æ—Å—Ç–∏" },
        { name: "–ü–µ—á–µ–Ω—å–µ", price: 420, category: "–°–ª–∞–¥–æ—Å—Ç–∏" },
        { name: "–ö–æ–Ω—Ñ–µ—Ç—ã", price: 780, category: "–°–ª–∞–¥–æ—Å—Ç–∏" }
      ]
    },

    tonoyan: {
      name: "Tonoyan",
      products: [
        { name: "–Ø–±–ª–æ–∫–∏ 1–∫–≥", price: 330, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–ë–∞–Ω–∞–Ω—ã 1–∫–≥", price: 460, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–ê–ø–µ–ª—å—Å–∏–Ω—ã 1–∫–≥", price: 520, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–ü–æ–º–∏–¥–æ—Ä—ã 1–∫–≥", price: 540, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–û–≥—É—Ä—Ü—ã 1–∫–≥", price: 500, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å 1–∫–≥", price: 240, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–õ—É–∫ 1–∫–≥", price: 190, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–ö–∞–ø—É—Å—Ç–∞ 1–∫–≥", price: 220, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–ó–µ–ª–µ–Ω—å", price: 150, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" },
        { name: "–ì—Ä–∏–±—ã", price: 700, category: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã" }
      ]
    },

    danielyan: {
      name: "Danielyan",
      products: [
        { name: "–¢–æ—Ä—Ç —à–æ–∫–æ–ª–∞–¥–Ω—ã–π", price: 2500, category: "–°–ª–∞–¥–æ—Å—Ç–∏" },
        { name: "–¢–æ—Ä—Ç –≤–∞–Ω–∏–ª—å–Ω—ã–π", price: 2400, category: "–°–ª–∞–¥–æ—Å—Ç–∏" },
        { name: "–≠–∫–ª–µ—Ä", price: 300, category: "–°–ª–∞–¥–æ—Å—Ç–∏" },
        { name: "–ù–∞–ø–æ–ª–µ–æ–Ω", price: 2800, category: "–°–ª–∞–¥–æ—Å—Ç–∏" },
        { name: "–ö—Ä—É–∞—Å—Å–∞–Ω", price: 250, category: "–°–ª–∞–¥–æ—Å—Ç–∏" },
        { name: "–ú–∞—Ñ—Ñ–∏–Ω", price: 350, category: "–°–ª–∞–¥–æ—Å—Ç–∏" },
        { name: "–ü–∞—Ö–ª–∞–≤–∞", price: 400, category: "–°–ª–∞–¥–æ—Å—Ç–∏" },
        { name: "–ü–µ—á–µ–Ω—å–µ –∞—Å—Å–æ—Ä—Ç–∏", price: 1500, category: "–°–ª–∞–¥–æ—Å—Ç–∏" }
      ]
    }
  };

  let stores = JSON.parse(localStorage.getItem("stores")) || defaultStores;

  /* ================= LANGUAGE ================= */

  const translations = {
    ru: {
      nav_home: "–ì–ª–∞–≤–Ω–∞—è",
      nav_order: "–ó–∞–∫–∞–∑–∞—Ç—å",
      nav_contacts: "–ö–æ–Ω—Ç–∞–∫—Ç—ã",
      nav_admin: "–ê–¥–º–∏–Ω",
      nav_courier: "–ö—É—Ä—å–µ—Ä",

      hero_title: "–î–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –ê—Ä—Ç–∏–∫–µ",
      hero_subtitle: "–°–≤–µ–∂–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –∏–∑ —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç–æ–≤ ‚Äî –ø—Ä—è–º–æ –∫ –≤–∞—à–µ–π –¥–≤–µ—Ä–∏",
      hero_btn: "–ó–∞–∫–∞–∑–∞—Ç—å —Å–µ–π—á–∞—Å",

      shops_title: "–°—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç—ã",
      categories_title: "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤",

      cat_veg: "–û–≤–æ—â–∏ –∏ —Ñ—Ä—É–∫—Ç—ã",
      cat_meat: "–ú—è—Å–æ –∏ —Ä—ã–±–∞",
      cat_dairy: "–ú–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã",
      cat_bread: "–•–ª–µ–± –∏ –≤—ã–ø–µ—á–∫–∞",
      cat_grocery: "–ë–∞–∫–∞–ª–µ—è",
      cat_drinks: "–ù–∞–ø–∏—Ç–∫–∏",
      cat_clean: "–ë—ã—Ç–æ–≤–∞—è —Ö–∏–º–∏—è",
      cat_sweets: "–°–ª–∞–¥–æ—Å—Ç–∏",

      cart_global: "–ö–æ—Ä–∑–∏–Ω–∞ (–≤—Å–µ –º–∞–≥–∞–∑–∏–Ω—ã)",
      cart_store: "–ö–æ—Ä–∑–∏–Ω–∞ —ç—Ç–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞",

      btn_whatsapp_store: "–ó–∞–∫–∞–∑–∞—Ç—å –∏–∑ —ç—Ç–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ (WhatsApp)",
      btn_telegram_store: "–ó–∞–∫–∞–∑–∞—Ç—å –∏–∑ —ç—Ç–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ (Telegram)",

      order_title: "–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞",
      order_send: "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑",

      contacts_title: "–ö–æ–Ω—Ç–∞–∫—Ç—ã",
      contacts_phone_label: "–¢–µ–ª–µ—Ñ–æ–Ω / WhatsApp:",
      contacts_city: "–ê—Ä—Ç–∏–∫, –ê—Ä–º–µ–Ω–∏—è",

      footer_text: "–î–æ—Å—Ç–∞–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –ê—Ä—Ç–∏–∫–µ",

      btn_back: "–ù–∞–∑–∞–¥",
      btn_home: "–ì–ª–∞–≤–Ω–∞—è",

      admin_login_title: "–í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å",
      admin_login_btn: "–í–æ–π—Ç–∏",
      admin_panel_title: "–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å",
      admin_select_store: "–í—ã–±–µ—Ä–∏—Ç–µ —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç:",
      admin_add_product: "–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä",
      admin_add_btn: "–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä",
      admin_orders_report: "–û—Ç—á—ë—Ç –ø–æ –∑–∞–∫–∞–∑–∞–º",
      admin_logout: "–í—ã–π—Ç–∏ –∏–∑ –∞–¥–º–∏–Ω–∫–∏",

      courier_title: "–ü–∞–Ω–µ–ª—å –∫—É—Ä—å–µ—Ä–∞",
      courier_back: "–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é"
    },

    am: {
      nav_home: "‘≥’¨’≠’°’æ’∏÷Ä",
      nav_order: "’ä’°’ø’æ’´÷Ä’•’¨",
      nav_contacts: "‘ø’∏’∂’ø’°’Ø’ø’∂’•÷Ä",
      nav_admin: "‘±’§’¥’´’∂",
      nav_courier: "‘±’º’°÷Ñ’´’π",

      hero_title: "’Ñ’©’•÷Ä÷Ñ’´ ’°’º’°÷Ñ’∏÷Ç’¥ ‘±÷Ä’ø’´’Ø’∏÷Ç’¥",
      hero_subtitle: "‘π’°÷Ä’¥ ’¥’©’•÷Ä÷Ñ ’Ω’∏÷Ç’∫’•÷Ä’¥’°÷Ä’Ø’•’ø’∂’•÷Ä’´÷Å’ù ’∏÷Ç’≤’´’≤ ’Å’•÷Ä ’§’∏÷Ç’º’®",
      hero_btn: "’ä’°’ø’æ’´÷Ä’•’¨ ’∞’´’¥’°",

      shops_title: "’ç’∏÷Ç’∫’•÷Ä’¥’°÷Ä’Ø’•’ø’∂’•÷Ä",
      categories_title: "‘±’∫÷Ä’°’∂÷Ñ’∂’•÷Ä’´ ’Ø’°’ø’•’£’∏÷Ä’´’°’∂’•÷Ä",

      cat_veg: "‘≤’°’∂’ª’°÷Ä’•’≤’•’∂ ÷á ’¥÷Ä’£’•÷Ä",
      cat_meat: "’Ñ’´’Ω ÷á ’±’∏÷Ç’Ø",
      cat_dairy: "‘ø’°’©’∂’°’¥’©’•÷Ä÷Ñ",
      cat_bread: "’Ä’°÷Å ÷á ’≠’¥’∏÷Ä’•’≤’•’∂",
      cat_grocery: "’Ñ’©’•÷Ä÷Ñ",
      cat_drinks: "‘Ω’¥’´’π÷Ñ’∂’•÷Ä",
      cat_clean: "‘ø’•’∂÷Å’°’≤’°’µ’´’∂ ÷Ñ’´’¥’´’°",
      cat_sweets: "’î’°’≤÷Å÷Ä’°’æ’•’∂’´÷Ñ",

      cart_global: "‘∂’°’¥’¢’µ’∏÷Ç’≤ (’¢’∏’¨’∏÷Ä ’≠’°’∂’∏÷Ç’©’∂’•÷Ä’®)",
      cart_store: "‘±’µ’Ω ’≠’°’∂’∏÷Ç’©’´ ’¶’°’¥’¢’µ’∏÷Ç’≤’®",

      btn_whatsapp_store: "’ä’°’ø’æ’´÷Ä’•’¨ ’°’µ’Ω ’≠’°’∂’∏÷Ç’©’´÷Å (WhatsApp)",
      btn_telegram_store: "’ä’°’ø’æ’´÷Ä’•’¨ ’°’µ’Ω ’≠’°’∂’∏÷Ç’©’´÷Å (Telegram)",

      order_title: "’ä’°’ø’æ’•÷Ä’´ ’±÷á’°’Ø’•÷Ä’∫’∏÷Ç’¥",
      order_send: "’à÷Ç’≤’°÷Ä’Ø’•’¨ ’∫’°’ø’æ’•÷Ä’®",

      contacts_title: "‘ø’∏’∂’ø’°’Ø’ø’∂’•÷Ä",
      contacts_phone_label: "’Ä’•’º’°’≠’∏’Ω / WhatsApp:",
      contacts_city: "‘±÷Ä’ø’´’Ø, ’Ä’°’µ’°’Ω’ø’°’∂",

      footer_text: "’Ñ’©’•÷Ä÷Ñ’´ ’°’º’°÷Ñ’∏÷Ç’¥ ‘±÷Ä’ø’´’Ø’∏÷Ç’¥",

      btn_back: "’Ä’•’ø",
      btn_home: "‘≥’¨’≠’°’æ’∏÷Ä",

      admin_login_title: "’Ñ’∏÷Ç’ø÷Ñ ’°’§’¥’´’∂ ’æ’°’∞’°’∂’°’Ø",
      admin_login_btn: "’Ñ’∏÷Ç’ø÷Ñ",
      admin_panel_title: "‘±’§’¥’´’∂ ’æ’°’∞’°’∂’°’Ø",
      admin_select_store: "‘∏’∂’ø÷Ä’•÷Ñ ’Ω’∏÷Ç’∫’•÷Ä’¥’°÷Ä’Ø’•’ø’®:",
      admin_add_product: "‘±’æ’•’¨’°÷Å’∂’•’¨ ’∂’∏÷Ä ’°’∫÷Ä’°’∂÷Ñ",
      admin_add_btn: "‘±’æ’•’¨’°÷Å’∂’•’¨ ’°’∫÷Ä’°’∂÷Ñ",
      admin_orders_report: "’ä’°’ø’æ’•÷Ä’∂’•÷Ä’´ ’∞’°’∑’æ’•’ø’æ’∏÷Ç’©’µ’∏÷Ç’∂",
      admin_logout: "‘¥’∏÷Ç÷Ä’Ω ’£’°’¨ ’°’§’¥’´’∂’´÷Å",

      courier_title: "‘±’º’°÷Ñ’π’´ ’æ’°’∞’°’∂’°’Ø",
      courier_back: "’é’•÷Ä’°’§’°’º’∂’°’¨ ’£’¨’≠’°’æ’∏÷Ä ’ß’ª"
    }
  };

  function applyLanguage() {
    document.querySelectorAll("[data-i18n]").forEach(el => {
      const key = el.getAttribute("data-i18n");
      if (translations[currentLang][key]) {
        el.innerText = translations[currentLang][key];
      }
    });
    localStorage.setItem("lang", currentLang);
  }

  function switchLang() {
    currentLang = currentLang === "ru" ? "am" : "ru";
    applyLanguage();
  }

  /* ================= CORE LOGIC ================= */

  function saveStores() { localStorage.setItem("stores", JSON.stringify(stores)); }
  function saveCarts() { localStorage.setItem("carts", JSON.stringify(carts)); }

  function renderShops() {
    const container = document.getElementById("shops-list");
    container.innerHTML = "";
    Object.keys(stores).forEach(key => {
      const div = document.createElement("div");
      div.className = "card";
      div.innerText = "üõí " + stores[key].name;
      div.onclick = () => openStore(key);
      container.appendChild(div);
    });
  }

  function openStore(storeKey) {
    currentStore = storeKey;
    document.getElementById('home-page').classList.add('hidden');
    document.getElementById('category-page').classList.add('hidden');
    document.getElementById('admin-login').classList.add('hidden');
    document.getElementById('admin-panel').classList.add('hidden');
    document.getElementById('courier-panel').classList.add('hidden');
    document.getElementById('store-page').classList.remove('hidden');
    document.getElementById('store-title').innerText = stores[storeKey].name;

    const container = document.getElementById('store-products');
    container.innerHTML = '';

    stores[storeKey].products.forEach((item) => {
      const safeId = item.name.replace(/\s+/g,'');
      const qty = carts[storeKey]?.[item.name]?.qty || 0;
      const div = document.createElement('div');
      div.className = 'product';
      div.innerHTML = `
        <h4>${item.name}</h4>
        <p>–¶–µ–Ω–∞: ${item.price} AMD</p>
        <div class="qty-controls">
          <button onclick="changeQty('${storeKey}', '${item.name}', ${item.price}, -1)">‚àí</button>
          <span class="qty-number" id="qty-${storeKey}-${safeId}">${qty}</span>
          <button onclick="changeQty('${storeKey}', '${item.name}', ${item.price}, 1)">+</button>
        </div>
      `;
      container.appendChild(div);
    });

    renderStoreCart(storeKey);
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function goHome() {
    document.getElementById('store-page').classList.add('hidden');
    document.getElementById('category-page').classList.add('hidden');
    document.getElementById('admin-login').classList.add('hidden');
    document.getElementById('admin-panel').classList.add('hidden');
    document.getElementById('courier-panel').classList.add('hidden');
    document.getElementById('home-page').classList.remove('hidden');
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function goBack() { window.history.back(); }

  function changeQty(storeKey, name, price, delta) {
    if (!carts[storeKey]) carts[storeKey] = {};
    if (!carts[storeKey][name]) carts[storeKey][name] = { price, qty: 0 };

    carts[storeKey][name].qty += delta;
    if (carts[storeKey][name].qty <= 0) {
      delete carts[storeKey][name];
    }

    updateQtyDisplay(storeKey, name);
    renderStoreCart(storeKey);
    renderGlobalCart();
    saveCarts();
  }

  function updateQtyDisplay(storeKey, name) {
    const safeId = name.replace(/\s+/g,'');
    const id = `qty-${storeKey}-${safeId}`;
    const el = document.getElementById(id);
    if (el) el.innerText = carts[storeKey]?.[name]?.qty || 0;
  }

  function removeItem(storeKey, name) {
    if (carts[storeKey] && carts[storeKey][name]) {
      delete carts[storeKey][name];
      renderStoreCart(storeKey);
      renderGlobalCart();
      saveCarts();
    }
  }

  function renderStoreCart(storeKey) {
    const container = document.getElementById("store-cart-items");
    container.innerHTML = "";
    let total = 0;

    const storeCart = carts[storeKey] || {};
    Object.keys(storeCart).forEach(name => {
      const item = storeCart[name];
      const sum = item.price * item.qty;
      total += sum;
      const div = document.createElement("div");
      div.className = "cart-item";
      div.innerHTML = `
        <span>${name} √ó ${item.qty}</span>
        <span>${sum} AMD</span>
        <button onclick="removeItem('${storeKey}', '${name}')" style="color:red;border:none;background:none;cursor:pointer;">‚ùå</button>
      `;
      container.appendChild(div);
    });

    document.getElementById("store-cart-total").innerText = `–ò—Ç–æ–≥–æ: ${total} AMD`;
  }

  function renderGlobalCart() {
    const container = document.getElementById("global-cart-items");
    container.innerHTML = "";
    let total = 0;

    Object.keys(carts).forEach(storeKey => {
      const storeName = stores[storeKey].name;
      const storeCart = carts[storeKey];

      if (storeCart && Object.keys(storeCart).length > 0) {
        const storeTitle = document.createElement("div");
        storeTitle.innerHTML = `<strong>${storeName}</strong>`;
        storeTitle.style.marginTop = "10px";
        container.appendChild(storeTitle);

        Object.keys(storeCart).forEach(name => {
          const item = storeCart[name];
          const sum = item.price * item.qty;
          total += sum;

          const div = document.createElement("div");
          div.className = "cart-item";
          div.innerHTML = `
            <span>${name} √ó ${item.qty}</span>
            <span>${sum} AMD</span>
            <button onclick="removeItem('${storeKey}', '${name}')" style="color:red;border:none;background:none;cursor:pointer;">‚ùå</button>
          `;
          container.appendChild(div);
        });
      }
    });

    const district = document.getElementById("district")?.value || "";
    const deliveryCost = deliveryPrices[district] || 0;

    document.getElementById("global-cart-total").innerText = `–¢–æ–≤–∞—Ä—ã: ${total} AMD`;
    document.getElementById("delivery-total").innerText = `–î–æ—Å—Ç–∞–≤–∫–∞: ${deliveryCost} AMD`;
    document.getElementById("grand-total").innerText = `–ò—Ç–æ–≥–æ: ${total + deliveryCost} AMD`;
  }

  /* ================= ORDERS & MESSAGING ================= */

  function sendStoreToWhatsApp() {
    if (!currentStore || !carts[currentStore] || Object.keys(carts[currentStore]).length === 0) {
      alert("–ö–æ—Ä–∑–∏–Ω–∞ —ç—Ç–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ –ø—É—Å—Ç–∞");
      return;
    }

    let message = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –•–æ—á—É –∑–∞–∫–∞–∑–∞—Ç—å –∏–∑ –º–∞–≥–∞–∑–∏–Ω–∞ ${stores[currentStore].name}:%0A`;
    let total = 0;

    Object.keys(carts[currentStore]).forEach(name => {
      const item = carts[currentStore][name];
      const sum = item.price * item.qty;
      message += `- ${name} √ó ${item.qty}: ${sum} AMD%0A`;
      total += sum;
    });

    message += `%0A–ò—Ç–æ–≥–æ: ${total} AMD`;
    saveOrder(stores[currentStore].name, carts[currentStore], total, "–ù–æ–≤—ã–π");

    window.open(`https://wa.me/37443797727?text=${message}`, '_blank');
  }

  function sendStoreToTelegram() {
    if (!currentStore || !carts[currentStore] || Object.keys(carts[currentStore]).length === 0) {
      alert("–ö–æ—Ä–∑–∏–Ω–∞ —ç—Ç–æ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞ –ø—É—Å—Ç–∞");
      return;
    }

    let message = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –•–æ—á—É –∑–∞–∫–∞–∑–∞—Ç—å –∏–∑ –º–∞–≥–∞–∑–∏–Ω–∞ ${stores[currentStore].name}:%0A`;
    let total = 0;

    Object.keys(carts[currentStore]).forEach(name => {
      const item = carts[currentStore][name];
      const sum = item.price * item.qty;
      message += `- ${name} √ó ${item.qty}: ${sum} AMD%0A`;
      total += sum;
    });

    message += `%0A–ò—Ç–æ–≥–æ: ${total} AMD`;
    saveOrder(stores[currentStore].name, carts[currentStore], total, "–ù–æ–≤—ã–π");

    window.open(`https://t.me/artikfood?text=${message}`, '_blank');
  }

  function sendFormToWhatsApp() {
    const name = document.getElementById('name').value;
    const phone = document.getElementById('phone').value;
    const address = document.getElementById('address').value;
    const comment = document.getElementById('comment').value;
    const district = document.getElementById('district').value;

    const deliveryCost = deliveryPrices[district] || 0;

    let message = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!%0A–ò–º—è: ${name}%0A–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}%0A–ê–¥—Ä–µ—Å: ${address}%0A–†–∞–π–æ–Ω: ${district}%0A–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏: ${deliveryCost} AMD`;

    let total = deliveryCost;

    Object.keys(carts).forEach(storeKey => {
      const storeCart = carts[storeKey];
      if (storeCart && Object.keys(storeCart).length > 0) {
        message += `%0A%0A–ú–∞–≥–∞–∑–∏–Ω ${stores[storeKey].name}:`;
        Object.keys(storeCart).forEach(name => {
          const item = storeCart[name];
          const sum = item.price * item.qty;
          message += `%0A- ${name} √ó ${item.qty}: ${sum} AMD`;
          total += sum;
        });
      }
    });

    message += `%0A%0A–ò—Ç–æ–≥–æ —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π: ${total} AMD`;

    saveOrder("–°–º–µ—à–∞–Ω–Ω—ã–π –∑–∞–∫–∞–∑", carts, total, "–ù–æ–≤—ã–π");

    window.open(`https://wa.me/37443797727?text=${message}`, '_blank');
  }

  function saveOrder(storeName, items, total, status) {
    const order = {
      id: Date.now(),
      date: new Date().toLocaleString(),
      store: storeName,
      items: JSON.parse(JSON.stringify(items)),
      total,
      status: status || "–ù–æ–≤—ã–π"
    };
    orders.push(order);
    localStorage.setItem("orders", JSON.stringify(orders));
    renderOrdersReport();
    renderCourierOrders();
  }

  /* ================= CATEGORY ================= */

  function openCategory(categoryName) {
    document.getElementById('home-page').classList.add('hidden');
    document.getElementById('store-page').classList.add('hidden');
    document.getElementById('admin-login').classList.add('hidden');
    document.getElementById('admin-panel').classList.add('hidden');
    document.getElementById('courier-panel').classList.add('hidden');
    document.getElementById('category-page').classList.remove('hidden');
    document.getElementById('category-title').innerText = categoryName;

    const container = document.getElementById('category-products');
    container.innerHTML = '';

    Object.keys(stores).forEach(storeKey => {
      const store = stores[storeKey];
      store.products.forEach(item => {
        if (item.category === categoryName) {
          const div = document.createElement('div');
          div.className = 'product';
          div.innerHTML = `
            <h4>${item.name}</h4>
            <p>–¶–µ–Ω–∞: ${item.price} AMD</p>
            <p style="font-size:12px;color:#777;">–ú–∞–≥–∞–∑–∏–Ω: ${store.name}</p>
            <button onclick="openStore('${storeKey}')">–ü–µ—Ä–µ–π—Ç–∏ –≤ –º–∞–≥–∞–∑–∏–Ω</button>
          `;
          container.appendChild(div);
        }
      });
    });
  }

  /* ================= ADMIN ================= */

  function openAdmin() {
    document.getElementById('home-page').classList.add('hidden');
    document.getElementById('store-page').classList.add('hidden');
    document.getElementById('category-page').classList.add('hidden');
    document.getElementById('courier-panel').classList.add('hidden');
    document.getElementById('admin-login').classList.remove('hidden');
  }

  function loginAdmin() {
    const user = document.getElementById('admin-user').value;
    const pass = document.getElementById('admin-pass').value;
    if (user === "admin" && pass === "1234") {
      document.getElementById('admin-login').classList.add('hidden');
      document.getElementById('admin-panel').classList.remove('hidden');
      loadAdminStores();
      renderOrdersReport();
    } else {
      document.getElementById('admin-error').innerText = "–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å";
    }
  }

  function logoutAdmin() {
    document.getElementById('admin-panel').classList.add('hidden');
    goHome();
  }

  function loadAdminStores() {
    const select = document.getElementById("admin-store-select");
    select.innerHTML = "";
    Object.keys(stores).forEach(key => {
      const option = document.createElement("option");
      option.value = key;
      option.text = stores[key].name;
      select.appendChild(option);
    });
    loadAdminProducts();
  }

  function loadAdminProducts() {
    const storeKey = document.getElementById("admin-store-select").value;
    const list = document.getElementById("admin-products-list");
    list.innerHTML = "";

    stores[storeKey].products.forEach((item, index) => {
      const div = document.createElement("div");
      div.innerHTML = `
        <input type="text" value="${item.name}" onchange="editProductName('${storeKey}', ${index}, this.value)" />
        <input type="number" value="${item.price}" onchange="editProductPrice('${storeKey}', ${index}, this.value)" />
        <input type="text" value="${item.category}" onchange="editProductCategory('${storeKey}', ${index}, this.value)" />
        <button class="danger" onclick="deleteProduct('${storeKey}', ${index})">–£–¥–∞–ª–∏—Ç—å</button>
        <hr/>
      `;
      list.appendChild(div);
    });
  }

  function editProductName(storeKey, index, value) {
    stores[storeKey].products[index].name = value;
    saveStores();
  }

  function editProductPrice(storeKey, index, value) {
    stores[storeKey].products[index].price = Number(value);
    saveStores();
  }

  function editProductCategory(storeKey, index, value) {
    stores[storeKey].products[index].category = value;
    saveStores();
  }

  function deleteProduct(storeKey, index) {
    stores[storeKey].products.splice(index, 1);
    saveStores();
    loadAdminProducts();
  }

  function addProduct() {
    const storeKey = document.getElementById("admin-store-select").value;
    const name = document.getElementById("new-product-name").value;
    const price = Number(document.getElementById("new-product-price").value);
    const category = document.getElementById("new-product-category").value;

    if (!name || price < 0 || !category) {
      alert("–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ");
      return;
    }

    stores[storeKey].products.push({ name, price, category });
    saveStores();
    document.getElementById("new-product-name").value = "";
    document.getElementById("new-product-price").value = "";
    document.getElementById("new-product-category").value = "";
    loadAdminProducts();
  }

  function renderOrdersReport() {
    const container = document.getElementById("orders-report");
    container.innerHTML = "";

    if (orders.length === 0) {
      container.innerHTML = "<p>–ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</p>";
      return;
    }

    orders.forEach((order, index) => {
      const div = document.createElement("div");
      div.className = "report-box";

      let itemsText = "";
      Object.keys(order.items).forEach(storeKey => {
        const storeCart = order.items[storeKey];
        if (storeCart && typeof storeCart === "object") {
          itemsText += `<strong>${stores[storeKey]?.name || storeKey}:</strong><br/>`;
          Object.keys(storeCart).forEach(name => {
            const item = storeCart[name];
            itemsText += `- ${name} √ó ${item.qty} = ${item.price * item.qty} AMD<br/>`;
          });
        }
      });

      div.innerHTML = `
        <strong>–ó–∞–∫–∞–∑ #${index + 1}</strong><br/>
        –î–∞—Ç–∞: ${order.date}<br/>
        –ú–∞–≥–∞–∑–∏–Ω: ${order.store}<br/>
        –°—É–º–º–∞: ${order.total} AMD<br/>
        –°—Ç–∞—Ç—É—Å:
        <select onchange="updateOrderStatus(${order.id}, this.value)">
          <option ${order.status === "–ù–æ–≤—ã–π" ? "selected" : ""}>–ù–æ–≤—ã–π</option>
          <option ${order.status === "–ü—Ä–∏–Ω—è—Ç" ? "selected" : ""}>–ü—Ä–∏–Ω—è—Ç</option>
          <option ${order.status === "–í –ø—É—Ç–∏" ? "selected" : ""}>–í –ø—É—Ç–∏</option>
          <option ${order.status === "–î–æ—Å—Ç–∞–≤–ª–µ–Ω" ? "selected" : ""}>–î–æ—Å—Ç–∞–≤–ª–µ–Ω</option>
        </select>
        <div>${itemsText}</div>
      `;
      container.appendChild(div);
    });
  }

  function updateOrderStatus(orderId, status) {
    const order = orders.find(o => o.id === orderId);
    if (order) {
      order.status = status;
      localStorage.setItem("orders", JSON.stringify(orders));
      renderCourierOrders();
    }
  }

  /* ================= COURIER ================= */

  function openCourier() {
    document.getElementById('home-page').classList.add('hidden');
    document.getElementById('store-page').classList.add('hidden');
    document.getElementById('category-page').classList.add('hidden');
    document.getElementById('admin-login').classList.add('hidden');
    document.getElementById('admin-panel').classList.add('hidden');
    document.getElementById('courier-panel').classList.remove('hidden');
    renderCourierOrders();
  }

  function renderCourierOrders() {
    const container = document.getElementById("courier-orders");
    container.innerHTML = "";

    if (orders.length === 0) {
      container.innerHTML = "<p>–ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</p>";
      return;
    }

    orders.forEach(order => {
      const div = document.createElement("div");
      div.className = "report-box";

      let itemsText = "";
      Object.keys(order.items).forEach(storeKey => {
        const storeCart = order.items[storeKey];
        if (storeCart && typeof storeCart === "object") {
          itemsText += `<strong>${stores[storeKey]?.name || storeKey}:</strong><br/>`;
          Object.keys(storeCart).forEach(name => {
            const item = storeCart[name];
            itemsText += `- ${name} √ó ${item.qty}<br/>`;
          });
        }
      });

      div.innerHTML = `
        <strong>–ó–∞–∫–∞–∑ #${order.id}</strong><br/>
        –ê–¥—Ä–µ—Å: ${document.getElementById("address")?.value || "‚Äî"}<br/>
        –°—É–º–º–∞: ${order.total} AMD<br/>
        –°—Ç–∞—Ç—É—Å: <strong>${order.status}</strong><br/>
        <div>${itemsText}</div>
        <button onclick="updateOrderStatus(${order.id}, '–í –ø—É—Ç–∏')">–í –ø—É—Ç–∏</button>
        <button onclick="updateOrderStatus(${order.id}, '–î–æ—Å—Ç–∞–≤–ª–µ–Ω')" style="background:#0088cc;">–î–æ—Å—Ç–∞–≤–ª–µ–Ω</button>
      `;
      container.appendChild(div);
    });
  }

  /* ================= INIT ================= */

  renderShops();
  renderGlobalCart();
  applyLanguage();

  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js').catch(() => {});
  }
</script>

</body>
</html>
